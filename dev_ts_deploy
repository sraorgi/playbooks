# Execution
# ansible-playbook mount.yml
#SRAO-20191125 - trial run for prod server copy deployables

- name: Test mount and unmounts
  hosts: all
  become: yes
  
  tasks:
    - name: Create a directory if it does not exist
      file:
        path: /tsdepl
        state: directory
        mode: '0755'
      become: yes
    
    -  name: Create a directory if it does not exist
       file:
         path: /home/oracle/to_depl/
         state: directory
         mode: '0755'
       become: yes
    
    - name: Mount Developer administered path
      mount:
        fstype: nfs
        path: /tsdeploy
        src: cohesity-corp1:/ansible/devs
        state: mounted
        
    - name: copy the ear file and conf files - need to change this to just execute a move command from the mount
      command: cp /tsdeploy/* /home/oracle/to_depl
      
    - name: Unmount Developer administered path
      mount:
        path: /tsdeploy
        state: unmounted
